# TG Helper - 题库管理与答题系统

## 项目简介

TG Helper是一款专为头歌平台设计的本地刷题助手，能够将头歌平台上所有实训中的选择、填空、判断题存储到本地，方便用户在本地快速刷题。该工具基于PyQt5开发，提供图形界面的题库管理与答题系统，支持题库导出、使用AI进行解析生成、总结错题集等功能。

**注意事项**：本工具并不能自动答题，原理也并不是读取内部正确答案，而是根据你已经提交过并且系统判别过满分的试题，把你的作答内容直接提取。提取前务必保证自己当前提交的答案为正确的，才能获取到准确的答案！

## 主要功能

### 1. 题库管理

- 支持加载JSON格式的题库文件
- 自动统计各题型数量
- 支持多题库切换和管理
- 错题本导出功能

### 2. 题目抽取

- 按题型数量配置抽取题目
- 支持自定义各题型抽取数量
- 自动按题型顺序（单选题→多选题→判断题→填空题）排列

### 3. 答题练习

- 直观的答题界面
- 支持多种题型的答题交互
- 实时进度显示
- 上一题/下一题导航
- 答案查看功能

### 4. 扩展功能

- **网页源代码捕捉器**：通过内置浏览器加载网页题库并导出
- **DeepSeek解析**：利用DeepSeek API解析题目内容（可选功能）

## 技术栈

- **编程语言**：Python 3.9+
- **GUI框架**：PyQt5
- **浏览器组件**：PyQtWebEngine
- **网络请求**：requests
- **HTML解析**：beautifulsoup4、lxml

## 安装说明

### 1. 环境要求

- Python 3.9+
- Windows 10/11（推荐）

### 2. 安装依赖

```bash
pip install -r requirements.txt
```

主要依赖包：

- PyQt5==5.15.9
- PyQtWebEngine==5.15.6
- requests==2.31.0
- beautifulsoup4==4.12.2
- lxml==4.9.3

### 3. 启动程序

```bash
python main.py
```

## 使用说明

### 1. 加载题库

1. 启动程序后，系统默认加载 `questions.json`文件
2. 点击"当前题库"按钮可切换其他JSON格式的题库文件
3. 点击"手动导入题库"可打开网页源代码捕捉器

### 2. 配置答题

1. 在"答题配置"界面中，设置各题型的抽取数量
2. 确保总题数大于0
3. 点击"开始答题"进入答题界面

### 3. 答题练习

1. 在答题界面中，查看题目内容
2. 根据题型选择或输入答案
3. 使用"上一题"/"下一题"导航
4. 点击"查看答案"可查看当前题目的正确答案
5. 完成所有题目后，点击"提交"查看成绩

### 4. 使用扩展功能

#### 网页源代码捕捉器（头歌平台题库导入）

1. 点击"手动导入题库"按钮，弹出内置浏览器窗口
2. 在浏览器中登录自己的头歌账号
3. 打开想要导出的实训窗口，进入答题界面
4. **注意**：每打开一节实训内容，需要点击浏览器上方的"手动捕捉"按钮进行题目抓取
5. 重复步骤3-4，直到完成所有实训所有章节所有节的手动捕捉
6. 点击"生成题库"按钮，系统会自动生成一个题库文件（`questions.json`）保存在本地

**重要提示**：请确保在捕捉题目之前，你已经提交过该题目的正确答案并获得满分，否则系统将无法提取到准确的答案！

#### DeepSeek解析（AI生成答案解析）

默认获取的题目是没有解析的，你可以使用自己的DeepSeek API来通过AI生成解析，步骤如下：

1. 确保 `deepseek_parser.py`文件存在
2. 点击"DeepSeek解析"按钮，打开DeepSeek解析窗口
3. 在解析窗口中，输入你的DeepSeek API密钥
4. 选择要生成解析的题目范围（可选择全部题目或特定题型）
5. 点击"开始解析"按钮，系统会调用DeepSeek API为题目生成详细解析
6. 解析完成后，生成的解析内容会自动保存到题库文件中

**提示**：使用DeepSeek解析功能需要网络连接，且会消耗你的API额度，请合理使用。

## 项目结构

TG_helper/
├── main.py                # 主程序入口
├── browser_source_saver.py # 网页源代码捕捉器
├── deepseek_parser.py     # DeepSeek解析功能
├── parse_questions.py     # 题目解析功能
├── analyze_json.py        # JSON分析工具
├── check_question_content.py # 题目内容检查
├── convert_cafuc_to_json.py # CAFUC格式转换
├── convert_json_to_text.py # JSON转文本
├── questions.txt          # 题目文本文件
├── requirements.txt       # 项目依赖

## 题库格式

题库文件采用JSON格式，每个题目包含以下字段：

```json
{
  "type": "单选题",        # 题型：单选题、多选题、判断题、填空题
  "content": "题目内容",   # 题干内容
  "options": [             # 选项列表（单选题、多选题）
    "选项A",
    "选项B",
    "选项C",
    "选项D"
  ],
  "correct_answer": ["A"], # 正确答案
  "analysis": "答案解析"    # 答案解析（可选）
}
```

## 注意事项

1. 确保Python版本为3.9或以上
2. 首次运行时，浏览器数据会保存在 `browser_data`目录
3. DeepSeek解析功能需要 `deepseek_parser.py`文件支持
4. 建议定期备份题库文件

## 故障排除

### 1. 程序无法启动

- 检查Python环境是否正确安装
- 确保所有依赖已正确安装
- 检查 `main.py`文件是否存在

### 2. 题库加载失败

- 检查题库文件格式是否正确
- 确保文件编码为UTF-8
- 检查文件路径是否正确

### 3. 网页捕捉器无法使用

- 确保网络连接正常
- 检查目标网站是否可访问
- 清除浏览器缓存后重试

## 许可证

本项目采用MIT许可证，可自由使用和修改。

## 联系方式

如有问题或建议，请联系项目开发者。
